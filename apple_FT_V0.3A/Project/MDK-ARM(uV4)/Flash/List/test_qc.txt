; generated by Component: ARM Compiler 5.06 update 7 (build 960) Tool: ArmCC [4d365d]
; commandline ArmCC [--c99 --list --split_sections --debug -c --asm --interleave --gnu -o.\flash\obj\test_qc.o --asm_dir=.\Flash\List\ --list_dir=.\Flash\List\ --depend=.\flash\obj\test_qc.d --cpu=Cortex-M4.fp.sp --apcs=interwork -O0 --diag_suppress=9931,870 -I..\..\User -I..\..\User\bsp_stm32f4xx -I..\..\User\bsp_stm32f4xx\inc -I..\..\Libraries\STM32F4xx_StdPeriph_Driver\inc -I..\..\Libraries\CMSIS\Device\ST\STM32F4xx\Include -I..\..\Libraries\CMSIS\Include -I..\..\User\FatFS\src -I..\..\Libraries\STM32_USB_Device_Library\Class\msc\inc -I..\..\Libraries\STM32_USB_Device_Library\Core\inc -I..\..\Libraries\STM32_USB_OTG_Driver\inc -I..\..\User\usbd_mass_storage -I..\..\User\ft_support -I..\..\User\test -I..\..\User\emenu -I..\..\User\chip_ft -I..\..\User\lwrb -I..\..\User\easylogger\inc -I..\..\User\easylogger\plugins\file -I..\..\User\LOG -I..\..\User\MultiButton-1.1.0 -I..\..\User\cm_backtrace -I..\..\User\MultiTimer -I.\RTE\_Flash -IC:\Users\qizha\AppData\Local\Arm\Packs\ARM\CMSIS\5.9.0\CMSIS\Core\Include -IC:\Users\qizha\AppData\Local\Arm\Packs\Keil\STM32F4xx_DFP\2.17.1\Drivers\CMSIS\Device\ST\STM32F4xx\Include -D__MICROLIB -D__UVISION_VERSION=538 -D_RTE_ -DSTM32F407xx -D_RTE_ -DUSE_STDPERIPH_DRIVER -DSTM32F40_41xxx -DUSE_USB_OTG_FS -DUSE_EMBEDDED_PHY --signed_chars --omf_browse=.\flash\obj\test_qc.crf ..\..\User\chip_ft\test_qc.c]
                          THUMB

                          AREA ||i.is_trimed_chip||, CODE, READONLY, ALIGN=1

                  is_trimed_chip PROC
;;;78     //已trim过的芯片 返回  1：已测试过  0：未测试过
;;;79     static uint8_t is_trimed_chip(void)
000000  2000              MOVS     r0,#0
;;;80     {
;;;81     //    if(efuse_otp_data_brom.EFUSE_VLD == 0x8e3b5a69)
;;;82     //    {
;;;83     //        if(efuse_otp_data_brom.PMU_BGR_VLD          && 
;;;84     //           efuse_otp_data_brom.PMU_LPV_VLD          &&
;;;85     //           efuse_otp_data_brom.OSC_AUDIO_VLD        &&
;;;86     //           efuse_otp_data_brom.OSC_32K_VLD          &&
;;;87     //           efuse_otp_data_brom.OSC_CORE_80M_VLD     &&
;;;88     //           efuse_otp_data_brom.OSC_CORE_100M_VLD    &&
;;;89     //           efuse_otp_data_brom.OSC_CORE_120M_VLD   )
;;;90     //        {
;;;91     //            return 1;
;;;92     //        }
;;;93     //        else
;;;94     //        {
;;;95     //            return 0;
;;;96     //        }
;;;97     //    }
;;;98      
;;;99              return 0;
;;;100        
;;;101    }
000002  4770              BX       lr
                          ENDP


                          AREA ||i.qc_trimed||, CODE, READONLY, ALIGN=1

                  qc_trimed PROC
;;;4      
;;;5      static fsm_rt_t qc_trimed(void)
000000  2000              MOVS     r0,#0
;;;6      {
;;;7          fsm_rt_t ret=fsm_rt_cpl;
;;;8          
;;;9      //    if((trim_result.pmu_bgr_trim_volt_default < BGR_VOLT_MIN) || (trim_result.pmu_bgr_trim_volt_default > BGR_VOLT_MAX))
;;;10     //    {
;;;11     //        ret = fsm_rt_err_QC_BGR_volt;
;;;12     //        logging("fail: QC BGR volt\r\n");
;;;13     //    }
;;;14     //    if(trim_result.pmu_lpv_trim_volt_default < LPV_VOLT_MIN || trim_result.pmu_lpv_trim_volt_default > LPV_VOLT_MAX)
;;;15     //    {
;;;16     //        ret = fsm_rt_err_QC_LPV_volt;
;;;17     //        logging("fail: QC LPV volt\r\n");
;;;18     //    }
;;;19     //    if(trim_result.osc_pmu_trim_freq_default < OSC_PMU_FREQ_MIN || trim_result.osc_pmu_trim_freq_default > OSC_PMU_FREQ_MAX)
;;;20     //    {
;;;21     //        ret = fsm_rt_err_QC_osc_pmu;
;;;22     //        logging("fail: QC osc pmu\r\n");
;;;23     //    }
;;;24     
;;;25     //    if(trim_result.osc_audio_trim_freq_default < OSC_AUDIO_FREQ_MIN || trim_result.osc_audio_trim_freq_default > OSC_AUDIO_FREQ_MAX)
;;;26     //    {
;;;27     //        ret = fsm_rt_err_QC_osc_audio;
;;;28     //        logging("fail: QC osc audio\r\n");
;;;29     //    }
;;;30     //    
;;;31     //    if(trim_result.osc_core_trimed_freq[0] < OSC_CORE_80M_MIN || trim_result.osc_core_trimed_freq[0] > OSC_CORE_80M_MAX)
;;;32     //    {
;;;33     //        ret = fsm_rt_err_QC_osc_core;
;;;34     //        logging("fail: QC core 80M \r\n");
;;;35     //    }
;;;36     // 
;;;37     //    if(trim_result.osc_core_trimed_freq[1] < OSC_CORE_100M_MIN || trim_result.osc_core_trimed_freq[1] > OSC_CORE_100M_MAX)
;;;38     //    {
;;;39     //        ret = fsm_rt_err_QC_osc_core;
;;;40     //        logging("fail: QC core 100M \r\n");
;;;41     //    }
;;;42     // 
;;;43     //    if(trim_result.osc_core_trimed_freq[2] < OSC_CORE_120M_MIN || trim_result.osc_core_trimed_freq[2] > OSC_CORE_120M_MAX)
;;;44     //    {
;;;45     //        ret = fsm_rt_err_QC_osc_core;
;;;46     //        logging("fail: QC core 120M \r\n");
;;;47     //    }
;;;48         
;;;49         return ret;
;;;50     }
000002  4770              BX       lr
;;;51     
                          ENDP


                          AREA ||i.test_qc_all||, CODE, READONLY, ALIGN=1

                  test_qc_all PROC
;;;52     
;;;53     fsm_rt_t test_qc_all(void)
000000  b510              PUSH     {r4,lr}
;;;54     {
;;;55         fsm_rt_t ret=fsm_rt_cpl;
000002  2400              MOVS     r4,#0
;;;56             
;;;57         ret = qc_trimed();
000004  f7fffffe          BL       qc_trimed
000008  4604              MOV      r4,r0
;;;58         
;;;59        
;;;60     
;;;61         return ret;
00000a  4620              MOV      r0,r4
;;;62     }
00000c  bd10              POP      {r4,pc}
;;;63     //ft 和 ft_prg模式下使用：已测试过的芯片，查看trim区是否ok，如果不是已测试芯片则会跳过
                          ENDP


                          AREA ||i.test_qc_trimed||, CODE, READONLY, ALIGN=2

                  test_qc_trimed PROC
;;;63     //ft 和 ft_prg模式下使用：已测试过的芯片，查看trim区是否ok，如果不是已测试芯片则会跳过
;;;64     fsm_rt_t test_qc_trimed(void)
000000  b510              PUSH     {r4,lr}
;;;65     {
;;;66         fsm_rt_t ret = fsm_rt_cpl;
000002  2400              MOVS     r4,#0
;;;67         
;;;68         if(is_trimed_chip())
000004  f7fffffe          BL       is_trimed_chip
000008  b128              CBZ      r0,|L4.22|
;;;69         {
;;;70             ret = qc_trimed();
00000a  f7fffffe          BL       qc_trimed
00000e  4604              MOV      r4,r0
;;;71             if(ret != fsm_rt_cpl) return ret;
000010  b10c              CBZ      r4,|L4.22|
000012  4620              MOV      r0,r4
                  |L4.20|
;;;72         }
;;;73         logging("SUCCESS tested trim qc\r\n");
;;;74         return fsm_rt_cpl;
;;;75     }
000014  bd10              POP      {r4,pc}
                  |L4.22|
000016  4803              LDR      r0,|L4.36|
000018  6801              LDR      r1,[r0,#0]            ;73  ; g_iRunTime
00001a  a003              ADR      r0,|L4.40|
00001c  f7fffffe          BL       logger_buffer_write
000020  2000              MOVS     r0,#0                 ;74
000022  e7f7              B        |L4.20|
;;;76             
                          ENDP

                  |L4.36|
                          DCD      g_iRunTime
                  |L4.40|
000028  5b253864          DCB      "[%8d]SUCCESS tested trim qc\r\n",0
00002c  5d535543
000030  43455353
000034  20746573
000038  74656420
00003c  7472696d
000040  2071630d
000044  0a00    
000046  00                DCB      0
000047  00                DCB      0

;*** Start embedded assembler ***

#line 1 "..\\..\\User\\chip_ft\\test_qc.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___9_test_qc_c_6fc0c24f____REV16|
#line 129 "..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___9_test_qc_c_6fc0c24f____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___9_test_qc_c_6fc0c24f____REVSH|
#line 144
|__asm___9_test_qc_c_6fc0c24f____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
